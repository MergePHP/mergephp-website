<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>MergePHP</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<link rel="alternate" type="application/rss+xml" title="RSS Feed for mergephp.com" href="/atom.xml">
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<link rel="manifest" href="/icons/site.webmanifest">
	<link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#000000">
	<meta property="og:site_name" content="MergePHP">
	{% if page_image is defined %}<meta property="og:image" content="https://www.mergephp.com/{{ page_image }}">
	{% endif %}

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans:300;400;600;700;800&display=swap" rel="stylesheet">

	<!-- Font Awesome -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

	<!-- Customized Bootstrap Stylesheet -->
	<link href="/css/style.css" rel="stylesheet">
</head>

<body>
<div class="wrapper">
	<div class="sidebar">
		<div class="sidebar-text d-flex flex-column h-100 justify-content-center text-center">
			<a href="/"><img class="mx-auto d-block bg-primary img-fluid mb-4" alt="MergePHP Logo" src="/images/logo.jpg"></a>
			<p class="mb-4">
				MergePHP meets the second Thursday of every month at 20:00 Eastern/17:00 Pacific
			</p>
			<p class="mb-4">
				Next meeting: <span id="next-meeting-local">your local time</span>
			</p>
			<script>
				(function () {
					var output = document.getElementById('next-meeting-local');
					if (!output) {
						return;
					}

					var timeZone = 'America/New_York';
					var weekdayMap = {
						Sun: 0,
						Mon: 1,
						Tue: 2,
						Wed: 3,
						Thu: 4,
						Fri: 5,
						Sat: 6
					};

					function getTimeZoneParts(date, zone) {
						var parts = new Intl.DateTimeFormat('en-US', {
							timeZone: zone,
							year: 'numeric',
							month: '2-digit',
							day: '2-digit'
						}).formatToParts(date);
						var values = {};
						parts.forEach(function (part) {
							values[part.type] = part.value;
						});

						return {
							year: Number(values.year),
							month: Number(values.month),
							day: Number(values.day)
						};
					}

					function getWeekdayInTimeZone(year, monthIndex, day, zone) {
						var date = new Date(Date.UTC(year, monthIndex, day, 12, 0, 0));
						var weekday = new Intl.DateTimeFormat('en-US', {
							timeZone: zone,
							weekday: 'short'
						}).format(date);

						return weekdayMap[weekday];
					}

					function getTimeZoneOffsetMinutes(date, zone) {
						var parts = new Intl.DateTimeFormat('en-US', {
							timeZone: zone,
							hour12: false,
							year: 'numeric',
							month: '2-digit',
							day: '2-digit',
							hour: '2-digit',
							minute: '2-digit',
							second: '2-digit'
						}).formatToParts(date);
						var values = {};
						parts.forEach(function (part) {
							values[part.type] = part.value;
						});
						var asUtc = Date.UTC(
							Number(values.year),
							Number(values.month) - 1,
							Number(values.day),
							Number(values.hour),
							Number(values.minute),
							Number(values.second)
						);

						return (asUtc - date.getTime()) / 60000;
					}

					function getSecondThursdayMeetingUtc(year, monthIndex) {
						var firstDay = getWeekdayInTimeZone(year, monthIndex, 1, timeZone);
						var firstThursday = ((4 - firstDay + 7) % 7) + 1;
						var secondThursday = firstThursday + 7;
						var naiveUtc = Date.UTC(year, monthIndex, secondThursday, 20, 0, 0);
						var offsetMinutes = getTimeZoneOffsetMinutes(new Date(naiveUtc), timeZone);
						var meetingUtc = naiveUtc - (offsetMinutes * 60000);

						return meetingUtc;
					}

					var nowUtc = Date.now();
					var nowParts = getTimeZoneParts(new Date(nowUtc), timeZone);
					var year = nowParts.year;
					var month = nowParts.month - 1;
					var meetingUtc = getSecondThursdayMeetingUtc(year, month);

					if (nowUtc >= meetingUtc) {
						month += 1;
						if (month > 11) {
							month = 0;
							year += 1;
						}
						meetingUtc = getSecondThursdayMeetingUtc(year, month);
					}

					var meetingLocal = new Date(meetingUtc);
					var formatter = new Intl.DateTimeFormat(undefined, {
						dateStyle: 'long',
						timeStyle: 'short',
						hour12: false,
						hourCycle: 'h23'
					});

					output.textContent = formatter.format(meetingLocal);
				})();
			</script>
			<div class="d-flex justify-content-center mb-5">
				<a class="btn btn-outline-primary mr-2" title="Twitter" href="https://twitter.com/mergephp"><i class="fab fa-twitter"></i></a>
				<a class="btn btn-outline-primary mr-2" title="YouTube" href="https://www.youtube.com/c/MergePHP"><i class="fab fa-youtube"></i></a>
				<a class="btn btn-outline-primary mr-2" title="LinkedIn" href="https://www.linkedin.com/company/mergephp/"><i class="fab fa-linkedin-in"></i></a>
				<a class="btn btn-outline-primary mr-2" title="Mastodon" href="https://phpc.social/@merge"><i class="fab fa-mastodon"></i></a>
				<a class="btn btn-outline-primary mr-2" title="iCal Feed" href="/mergephp.ical"><i class="fa fa-calendar"></i></a>
				<a class="btn btn-outline-primary mr-2" title="RSS" href="/atom.xml"><i class="fa fa-rss"></i></a>
			</div>
		</div>
		<div class="sidebar-icon d-flex flex-column h-100 justify-content-center text-right">
			<i class="fas fa-2x fa-angle-double-right text-primary"></i>
		</div>
	</div>
	<div class="content">
